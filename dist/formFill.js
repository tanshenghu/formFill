define("widget/formFill/1.0.0/formFill",["$"],function(require,exports,module){var jQuery=require("$"),$=jQuery,formFill={init:function(a){return this.url=a.url,this.type=a.type||"getJSON",this.param=a.param,this.form=$(a.form),this.depth=a.depth,this.cite=a.cite||"",this.isCreate=a.isCreate,this.callback=a.callback,this.fillLine=a.fillLine,this.MAP=a.map,this.url?this.getData():this.fillVal(this.param),this.form},getData:function(){var This=this,O=$.extend({_:+new Date},this.param),cite="data."+this.cite;$[This.type](this.url,O,function(data){This.fillVal(cite.length>5?eval(cite):data)},"JSON")},fillVal:function(data){var This=this,elesort=function(a,b,c){var d,e=a.length&&a.prop("nodeName").toLowerCase(),f=a.attr("type");return"input"===e?d=f:e?d=e:This.isCreate?(This.form.append('<input type="hidden" name="'+b+'" value="'+c+'">'),window.console&&console.log(b+" Element is Null,creating...")):window.console&&console.log(b+" Element is Null,need create!"),d},iscomplete=!0,setVal=function(a,b,c){switch(elesort(a,b,c)){case"text":a.val(c);break;case"hidden":a.val(c);break;case"url":a.val(c);break;case"email":a.val(c);break;case"tel":a.val(c);break;case"textarea":a.val(c);break;case"checkbox":a.filter('[value="'+c+'"]').prop("checked",!0);break;case"radio":a.filter('[value="'+c+'"]').prop("checked",!0);break;case"select":a.val(c);break;default:a.text(c)}};if(This.depth===!0)This.form.find('[name!=""]').each(function(i,ele){ele=$(ele);var KEY=$.trim(ele.attr("name"));if(KEY){var _V="";try{_V=eval("data."+KEY)}catch(e){window.console&&console.log(KEY+" fail")}try{_V=This.MAP?eval("This.MAP."+KEY)[_V]||_V:_V}catch(e){window.console&&console.log(KEY+" fail")}"object"!=typeof _V?setVal(ele,KEY,_V):"function"==typeof This.fillLine&&This.fillLine.call(ele,_V,KEY)}});else for(var i in data){var dataval=data[i],ele=this.form.find('[name="'+i+'"]');(dataval===!0||dataval===!1||null===dataval)&&(dataval+=""),dataval=This.MAP&&This.MAP[i]?This.MAP[i][dataval]||dataval:dataval,"object"!=typeof dataval?setVal(ele,i,dataval):dataval instanceof Array?"function"==typeof this.fillLine&&this.fillLine.call(ele,dataval,i):(iscomplete=!1,window.console&&console.log("warning: json layout!"))}"function"==typeof this.callback&&this.callback.apply(this.form,[iscomplete])}};module.exports=formFill});
